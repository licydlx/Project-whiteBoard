<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <!--强制让文档的宽度与设备的宽度为1：1 ， 并且文档最大的宽度比例是1.0，且不允许用户点击屏幕放大浏览-->
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
    <!--WebApp全屏模式隐藏地址栏-->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <!--苹果强制全屏显示-->
    <meta name="apple-touch-fullscreen" content="yes" />
    <!--强制全屏显示-->
    <meta name="full-screen" content="yes" />
    <!--制定iphone中safari顶端的状态条的样式，（default：白色 ;  black:黑色，black-translucent：半透明）-->
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <!--告诉设备忽略将页面中的数字识别为电话号码-->
    <meta name="format-detection" content="telephone=no" />
    <!--告诉设备忽略将页面中的地址识别-->
    <meta name="format-detection" content="address=no" />
    <!--百度禁止转码-->
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <!--如果安装了 Google Chrome Frame，则使用 GCF 来渲染页面，如果没有安装 GCF，则使用最高版本的 IE 内核进行渲染。-->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <title>白板</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
        }
    </style>
    <link rel="stylesheet" href="./css/index.css">

    <!-- 画板第三方依赖 -->
    <script src='./js/fabric.min.js'></script>
    <!-- 声网web信令sdk  -->
    <script src='./js/AgoraSig-1.4.0.js'></script>

</head>

<body>
    <div id="whiteboardBox" class="whiteboardBox">
        <!-- 课件区 -->
        <div id="coursewareBox" className="App">
            <iframe id="coursewareIframe" title="课件iframe" name="coursewareIframe" allow="autoplay" frameBorder="0"
                scrolling="no" width="960px" height="540px" src="https://www.kunqu.tech/page1/">
                <p>Your browser does not support iframes.</p>
            </iframe>
        </div>

        <!-- 测试按钮 -->
        <div class="testButton">
            <button onclick="last()">上一页</button>
            <button onclick="next()">下一页</button>
        </div>

        <!-- 画板区 -->
        <div id="sketchpadBox" class="sketchpadBox">
            <canvas id="sketchpad" width="960" height="540">请使用支持HTML5的浏览器</canvas>
        </div>

        <!-- 画板工具区 -->
        <div id="sketchpadTools" class="sketchpadTools">
            <ul id="tools" class="tools">
                <li id="toolsPencil" data-type="pen" class="active">
                    <i class="icon-tools icon-pen-select" data-default='icon-tools icon-pen-black'></i>
                </li>
                <li data-type="arrow">
                    <i class="icon-tools icon-arrow-black" data-default='icon-tools icon-arrow-black'></i>
                </li>
                <li data-type="line">
                    <i class="icon-tools icon-line-black" data-default='icon-tools icon-line-black'></i>
                </li>
                <li data-type="dottedline">
                    <i class="icon-tools icon-dottedline-black" data-default='icon-tools icon-dottedline-black'></i>
                </li>
                <li data-type="circle">
                    <i class="icon-tools icon-circle-black" data-default='icon-tools icon-circle-black'></i>
                </li>
                <li data-type="ellipse">
                    <i class="icon-tools icon-ellipse-black" data-default='icon-tools icon-ellipse-black'></i>
                </li>
                <!-- <li class="hide" data-type="square">
                    <i class="icon-tools icon-square-black" data-default='icon-tools icon-square-black'></i>
                </li> -->
                <li data-type="rectangle">
                    <i class="icon-tools icon-rectangle-black" data-default='icon-tools icon-rectangle-black'></i>
                </li>
                <!--     <li data-type="rightangle">
                        <i class="icon-tools icon-rightangle-black" data-default='icon-tools icon-rightangle-black'></i>
                    </li>
                    <li data-type="equilateral">
                        <i class="icon-tools icon-equilateral-black" data-default='icon-tools icon-equilateral-black'></i>
                    </li>
                    <li class="hide" data-type="isosceles">
                        <i class="icon-tools icon-isosceles-black" data-default='icon-tools icon-isosceles-black'></i>
                    </li> -->
                <li data-type="text">
                    <i class="icon-tools icon-text-black" data-default='icon-tools icon-text-black'></i>
                </li>
                <li data-type="remove">
                    <i class="icon-tools icon-remove-black" data-default='icon-tools icon-remove-black'></i>
                </li>
            </ul>
        </div>

        <!-- 显示与隐藏按钮 -->
        <div class="shButton">
            <button onclick="show()">显示</button>
            <button onclick="hide()">隐藏</button>
        </div>

        <div>
            <button onclick="sendMessage()">发送消息</button>
        </div>
    </div>

    <script src="./js/jsBridge.js"></script>
    <script src="./js/signalingBridge.js"></script>
    <script src="./js/sketchpad.js"></script>

    <script>
        // 是否有某个class
        function hasClass(elements, cName) {
            // ( \\s|^ ) 判断前面是否有空格 （\\s | $ ）判断后面是否有空格 两个感叹号为转换为布尔值 以方便做判断
            return !!elements.className.match(new RegExp("(\\s|^)" + cName + "(\\s|$)"));
        };

        // 添加class
        function addClass(elements, cName) {
            if (!hasClass(elements, cName)) {
                elements.className += " " + cName;
            };
        }

        // 移除class
        function removeClass(elements, cName) {
            if (hasClass(elements, cName)) {
                elements.className = elements.className.replace(new RegExp("(\\s|^)" + cName + "(\\s|$)"), " "); // replace方法是替换
            };
        }

        function last() {
            var data = {
                type: 'agoraAdyLastPage',
                pageNum: 1
            };
            window.jsAPI.pageControl(data);
        };

        function next() {
            var data = {
                type: 'agoraAdyNextPage',
                pageNum: 2
            };
            window.jsAPI.pageControl(data);
        };

        var sketchpadBox = document.getElementById('sketchpadBox');
        var sketchpadTools = document.getElementById('sketchpadTools');
        function show() {
            sketchpadTools.className = "sketchpadTools";
            sketchpadBox.className = "sketchpadBox";
            addClass(sketchpadTools, 'show')
            addClass(sketchpadBox, 'show')
            
        }

        function hide() {
            sketchpadTools.className = "sketchpadTools";
            sketchpadBox.className = "sketchpadBox";
            addClass(sketchpadTools, 'hide')
            addClass(sketchpadBox, 'hide')
        }

    </script>
</body>

</html>